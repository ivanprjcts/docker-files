FROM tomcat:7

ENV STRUTS_VERSION 2.3.14

RUN set -ex \
	&& rm -rf /usr/local/tomcat/webapps/* \
	&& chmod a+x /usr/local/tomcat/bin/*.sh

ADD http://central.maven.org/maven2/org/apache/struts/struts2-blank/${STRUTS_VERSION}/struts2-blank-${STRUTS_VERSION}.war /usr/local/tomcat/webapps/ROOT.war

RUN unzip -n $CATALINA_HOME/webapps/ROOT.war -d $CATALINA_HOME/webapps/ROOT && rm $CATALINA_HOME/webapps/ROOT.war

COPY HelloWorld.jsp /usr/local/tomcat/webapps/ROOT/example/HelloWorld.jsp

EXPOSE 8080
